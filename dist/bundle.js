(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function Sounds(){function e(e,t,a,n){var c=this,l=this.createGain();return l.gain.value=0,l.trigger=function(n){var r=c.currentTime;l.gain.cancelScheduledValues(r),l.gain.setValueAtTime(0,r),l.gain.linearRampToValueAtTime(1,r+e),r+=e,l.gain.linearRampToValueAtTime(t,r+a),n&&setTimeout(function(){return l.release()},1e3*n)},l.release=function(){var e=c.currentTime;l.gain.cancelScheduledValues(e),l.gain.setValueAtTime(l.gain.value,e),l.gain.linearRampToValueAtTime(0,e+n)},l}function t(){var e=pe.createBiquadFilter();e.type="lowpass",e.frequency.value=2e3;var t=pe.createBiquadFilter();t.type="lowpass",t.frequency.value=2e3;var a=pe.createBiquadFilter();a.type="highpass",a.frequency.value=500;var n=pe.createBiquadFilter();return n.type="highpass",n.frequency.value=500,e.connect(t),t.connect(a),a.connect(n),n.connect(G),b=e,e}function a(){var e=pe.createDelay();e.delayTime.value=parseFloat(document.getElementById("dtime").value),D=e;var t=pe.createGain();return t.gain.value=parseFloat(document.getElementById("dregen").value),A=t,t.connect(e),e.connect(t),e.connect(G),e}function n(){var e=pe.createConvolver();return e.buffer=k,e.connect(G),e}function c(){return se||(se=new WaveShaper(pe)),se.output.connect(G),se.setDrive(5),se.input}function l(){var e=pe.createOscillator(),t=pe.createGain(),a=pe.createGain();return e.type=document.getElementById("lfotype").value,e.frequency.value=parseFloat(document.getElementById("lfo").value),t.gain.value=1,a.gain.value=1,e.connect(a),a.connect(t.gain),t.connect(G),S=e,lfotype=e,lfodepth=a,e.start(0),t}function r(){var e=pe.createOscillator(),t=(pe.createGain(),pe.createGain()),a=pe.createBiquadFilter();return a.type="lowpass",a.Q.value=parseFloat(document.getElementById("lplfoq").value),ne=a,e.type="sine",e.frequency.value=parseFloat(document.getElementById("lplfo").value),e.connect(t),a.frequency.value=2500,t.gain.value=2500*parseFloat(document.getElementById("lplfodepth").value),t.connect(a.frequency),a.connect(G),te=e,ae=t,e.start(0),a}function o(){var e=pe.createGain(),t=pe.createGain(),a=pe.createOscillator();return a.type="sine",Y=a,a.frequency.value=Math.pow(2,parseFloat(document.getElementById("rmfreq").value)),a.connect(t.gain),t.gain.value=0,e.connect(t),t.connect(G),a.start(0),e}function u(e){var t=e.delay,a=e.depth,n=e.speed,c=pe.createDelay();c.delayTime.value=parseFloat(t),C=c;var l=pe.createGain(),r=pe.createOscillator(),o=pe.createGain();return o.gain.value=parseFloat(a),O=o,r.type="sine",r.frequency.value=parseFloat(n),M=r,r.connect(o),o.connect(c.delayTime),l.connect(G),l.connect(c),c.connect(G),r.start(0),l}function i(){var e=pe.createDelay();e.delayTime.value=parseFloat(document.getElementById("vdelay").value),C=e;var t=pe.createGain(),a=pe.createOscillator(),n=pe.createGain();return n.gain.value=parseFloat(document.getElementById("vdepth").value),O=n,a.type="sine",a.frequency.value=parseFloat(document.getElementById("vspeed").value),M=a,a.connect(n),n.connect(e.delayTime),t.connect(e),e.connect(G),a.start(0),t}function d(){var e=pe.createDelay();e.delayTime.value=parseFloat(document.getElementById("fldelay").value),V=e;var t=pe.createGain(),a=pe.createGain(),n=pe.createOscillator(),c=pe.createGain();return c.gain.value=parseFloat(document.getElementById("fldepth").value),X=c,a.gain.value=parseFloat(document.getElementById("flfb").value),_=a,n.type="sine",n.frequency.value=parseFloat(document.getElementById("flspeed").value),W=n,n.connect(c),c.connect(e.delayTime),t.connect(G),t.connect(e),e.connect(G),e.connect(a),a.connect(t),n.start(0),t}function s(){var e=pe.createChannelSplitter(2),t=pe.createChannelMerger(2),a=pe.createGain();a.connect(e),a.connect(G);var n=pe.createDelay(),c=pe.createDelay();n.delayTime.value=parseFloat(document.getElementById("scdelay").value),c.delayTime.value=parseFloat(document.getElementById("scdelay").value),R=n,H=c,e.connect(n,0),e.connect(c,1);var l=pe.createOscillator();return L=pe.createGain(),x=pe.createGain(),L.gain.value=parseFloat(document.getElementById("scdepth").value),x.gain.value=-parseFloat(document.getElementById("scdepth").value),l.type="triangle",l.frequency.value=parseFloat(document.getElementById("scspeed").value),P=l,l.connect(L),l.connect(x),L.connect(n.delayTime),x.connect(c.delayTime),n.connect(t,0,0),c.connect(t,0,1),t.connect(G),l.start(0),a}function v(){var e=pe.createGain(),t=pe.createDelay();t.delayTime.value=parseFloat(document.getElementById("mdtime").value),mdtime=t;var a=pe.createGain();a.gain.value=parseFloat(document.getElementById("mdfeedback").value),mdfeedback=a;var n=pe.createDelay();n.delayTime.value=parseFloat(document.getElementById("mddelay").value),Z=n;var c=pe.createOscillator(),l=pe.createGain();return l.gain.value=parseFloat(document.getElementById("mddepth").value),$=l,c.type="sine",c.frequency.value=parseFloat(document.getElementById("mdspeed").value),ee=c,c.connect(l),l.connect(n.delayTime),e.connect(t),t.connect(n),t.connect(a),n.connect(a),a.connect(t),a.connect(G),c.start(0),e}function p(){var e=pe.createChannelSplitter(2),t=pe.createChannelMerger(2),a=pe.createGain();return z=pe.createGain(),K=pe.createGain(),J=pe.createOscillator(),U=pe.createGain(),j=pe.createGain(),N=pe.createDelay(),Q=pe.createDelay(),z.gain.value=K.gain.value=parseFloat(document.getElementById("sflfb").value),a.connect(e),a.connect(G),N.delayTime.value=parseFloat(document.getElementById("sfldelay").value),Q.delayTime.value=parseFloat(document.getElementById("sfldelay").value),e.connect(N,0),e.connect(Q,1),N.connect(z),Q.connect(K),z.connect(Q),K.connect(N),U.gain.value=parseFloat(document.getElementById("sfldepth").value),j.gain.value=-parseFloat(document.getElementById("sfldepth").value),J.type="triangle",J.frequency.value=parseFloat(document.getElementById("sflspeed").value),J.connect(U),J.connect(j),U.connect(N.delayTime),j.connect(Q.delayTime),N.connect(t,0,0),Q.connect(t,0,1),t.connect(G),J.start(0),a}function g(){return effect=new Jungle(pe),effect.output.connect(G),effect.input}function y(){var e=pe.createWaveShaper(),t=pe.createBiquadFilter();t.type="lowpass",t.frequency.value=10;for(var a=new Float32Array(65536),n=-32768;n<32768;n++)a[n+32768]=(n>0?n:-n)/32768;return e.curve=a,e.connect(t),t.connect(G),e}function m(){var e=pe.createGain(),t=pe.createWaveShaper();ce=pe.createBiquadFilter(),ce.type="lowpass",ce.frequency.value=10;for(var a=new Float32Array(65536),n=-32768;n<32768;n++)a[n+32768]=(n>0?n:-n)/32768;return t.curve=a,t.connect(ce),le=pe.createGain(),le.gain.value=11585,ce.connect(le),re=pe.createBiquadFilter(),re.type="lowpass",re.Q.value=15,re.frequency.value=50,le.connect(re.frequency),re.connect(G),e.connect(t),e.connect(re),e}function f(){var e=pe.createGain(),t=pe.createWaveShaper();oe=pe.createBiquadFilter(),oe.type="lowpass",oe.frequency.value=10;for(var a=new Float32Array(65536),n=-32768;n<32768;n++)a[n+32768]=(n>0?n:-n)/32768;t.curve=a,t.connect(oe),ue=pe.createWaveShaper(),ue.curve=h(parseFloat(document.getElementById("ngFloor").value)),oe.connect(ue);var c=pe.createGain();return c.gain.value=0,ue.connect(c.gain),c.connect(G),e.connect(t),e.connect(c),e}function h(e){for(var t=new Float32Array(65536),a=32768*e,n=0;n<32768;n++){var c=n<a?0:1;t[32768-n]=-c,t[32768+n]=c}return t[0]=t[1],t}function F(){var e=pe.createScriptProcessor(ve,1,1),t=0,a=0;return e.onaudioprocess=function(e){for(var n=Math.pow(.5,ie),c=0;c<e.inputBuffer.numberOfChannels;c++)for(var l=e.inputBuffer.getChannelData(c),r=e.outputBuffer.getChannelData(c),o=0;o<ve;o++)t+=de,t>=1&&(t-=1,a=n*Math.floor(l[o]/n+.5)),r[o]=a},e.connect(G),e}function T(e,h){switch(e){case 0:b=a(h);break;case 1:b=n();break;case 2:b=c();break;case 3:b=t();break;case 4:b=l();break;case 5:b=u(h);break;case 6:b=d();break;case 7:b=o();break;case 8:b=s();break;case 9:b=p();break;case 10:b=g();break;case 11:b=v();break;case 12:var T=createPingPongDelay(pe,I==realAudioInput,.3,.4);T.output.connect(G),b=T.input;break;case 13:b=r();break;case 14:b=y();break;case 15:b=m();break;case 16:b=f();break;case 17:var T=createPingPongDelay(pe,I==realAudioInput,.5,.5);T.output.connect(G),T.input.connect(G);var B=G;G=T.input,G=m(),b=g(),G=B;break;case 18:var B=G;G=s(),G=c(),b=m(),G=B,se.setDrive(20);break;case 19:b=i();break;case 20:b=F();break;case 21:b=createApolloEffect()}return b}function B(e,t,a){T(t,a);var n=pe.createGain();return e.connect(q),e.connect(n),w}var E=window.AudioContext||window.webkitAudioContext;if(!E)return{note:function(){}};var I=null,G=null,q=null,w=null,b=null,k=null,D=null,A=null,S=null,M=null,C=null,O=null,P=null,R=null,H=null,L=null,x=null,V=null,W=null,X=null,_=null,N=null,Q=null,J=null,U=null,j=null,z=null,K=null,Y=null,Z=null,$=null,ee=null,te=null,ae=null,ne=null,ce=null,le=null,re=null,oe=null,ue=null,ie=16,de=1,se=null,ve=4096;ie=16,E.prototype.createEnvelope=function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return e.call.apply(e,[this].concat(a))};var pe=new E;return w=pe.createGain(),q=pe.createGain(),G=pe.createGain(),q.connect(w),G.connect(w),function(e){var t=Math.cos(.5*e*Math.PI),a=Math.cos(.5*(1-e)*Math.PI);q.gain.value=t,G.gain.value=a}(1),{note:function(e){var t=pe.createOscillator(),a=pe.createOscillator(),n=pe.createOscillator(),c=pe.createEnvelope(0,.4,.05,.35),l=pe.createGain();l.gain.value=.2;t.type="sine",t.frequency.value=e,t.start(),t.connect(c),a.type="sine",a.frequency.value=2*e,a.start(),a.connect(c),n.type="sine",n.frequency.value=4*e,n.start(),n.connect(c),l.connect(pe.destination),c.connect(l),B(c,5,{delay:.2,depth:3,speed:2}),c.trigger(.2)}}}function reloadPlay(){notes=getNotesFromRGB(length.value)}function render(e){var t=new Image;t.onload=function(){t.height>MAX_HEIGHT&&(t.width*=MAX_HEIGHT/t.height,t.height=MAX_HEIGHT),ctx.clearRect(0,0,canvas.width,canvas.height),canvas.width=t.width,canvas.height=t.height,ctx.drawImage(t,0,0,t.width,t.height),imgTarget.appendChild(canvas),notes=getNotesFromRGB(length.value)},t.src=e}function loadImage(e){if(!e.type.match(/image.*/))return void console.log("The dropped file is not an image: ",e.type);var t=new FileReader;t.onload=function(e){render(e.target.result)},t.readAsDataURL(e)}function getNotesFromRGB(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=canvas.height,a=canvas.width,n=ctx.getImageData(0,0,a,t),c=(n.data.length,[]),l=1;l<=e;l++){for(var r=0,o=0,u=0,i=n.data.length/e,d=0;d<i;d+=4)r+=n.data[l*d],o+=n.data[l*d+1],u+=n.data[l*d+2];r=Math.floor(r/(n.data.length/4))*e,o=Math.floor(o/(n.data.length/4))*e,u=Math.floor(u/(n.data.length/4))*e,c.push(r+o+u)}return c}var sounds=new Sounds,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),dropTarget=document.querySelector(".dropTarget"),imgTarget=document.querySelector(".imgTarget"),upload=document.querySelector(".upload"),play=document.querySelector(".play"),stop=document.querySelector(".stop"),length=document.querySelector(".length"),timing=document.querySelector(".timing"),MAX_HEIGHT=400,notes=[],playingTimeout=[];play.addEventListener("click",function(){playingTimeout=[],notes.map(function(e,t){var a=setTimeout(function(){sounds.note(e),document.body.style.backgroundColor="#"+Math.floor(16777215*Math.random()).toString(16)},t*timing.value);return playingTimeout.push(a),e})}),stop.addEventListener("click",function(){playingTimeout.map(function(e){window.clearTimeout(e)})}),length.addEventListener("change",reloadPlay),upload.addEventListener("change",function(e){e.preventDefault(),loadImage(e.target.files[0])}),dropTarget.addEventListener("click",function(){upload.click()}),dropTarget.addEventListener("dragover",function(e){e.preventDefault()},!0),dropTarget.addEventListener("drop",function(e){e.preventDefault(),loadImage(e.dataTransfer.files[0])},!0);

},{}]},{},[1]);
